syntax = "proto3";

package proto;

// Plugin ...
message Plugin {
  // Meta ...
  message Meta {
    // name ...
    string name       = 1;
    // identifier ...
    string identifier = 2;
    // version ...
    string version    = 3;
    // path ...
    string path       = 4;
  }

  // meta ...
  Meta meta   = 1;
}

// Adapter ...
service Adapter {
  // Register ...
  rpc Register(Register.Request) returns (Register.Response);
  // Unregister ...
  rpc Unregister(Unregister.Request) returns (Unregister.Response);
}

// Event ...
message Event {
  oneof event {
    Reply reply     = 10;
    Message message = 11;
  }
}

// Message ...
message Message {
  oneof message {
    TextMessage text_message = 1;
  }
}

// Reply ...
message Reply {
  oneof reply {
    TextMessage text_message = 1;
  }
}

// TextMessage ...
message TextMessage {

}

// Register ...
message Register {
  message Request {
    Topic topic = 1;
  }

  message Response {
    Plugin plugin = 1;
  }
}

// Unregister ...
message Unregister {
  message Request {
  }

  message Response {
  }
}

// Topic ...
message Topic {
  string cluster_url  = 1;
  string cluster_id   = 2;
  string name         = 3;
}

// PluginError
//
// These are standard error codes.
message PluginError {
  // Errors to occur in the communication
  enum Code {
    UNKNOWN = 0;
  }

  Code code = 1;
  string message = 2;
}
